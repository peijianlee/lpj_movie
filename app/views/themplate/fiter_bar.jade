
if allCategoryType && allCategoryType.length > 0
	each type in allCategoryType
		if type.cid && type.cid.length > 0
			- var typeName = type.name=='sort'?'类型' : type.name=='scene'?'场景' : type.name=='material'?'材质': '颜色'
			- if( typeof(keyword) !== 'string' && type.name=='sort' ) {
			-	var menu_wrap_class = 'store-menu-wrap'
			-	var menu_class = 'store-menu'
			-	typeName = '<a href="/store">所有商品</a>'
			- } else {
			-	var menu_wrap_class = 'search-nav-wrap'
			-	var menu_class = 'search-nav'
			-	typeName += ' :'
			- }
			div(class="#{menu_wrap_class}")
				dl(class="#{menu_class + ' wrap'}")
					dt.cd
						| !{typeName} 
					dd
						- if ( typeof(keyword) !== 'string' && type.name=='sort' ){
							a( href="/" ): i.icon-home
						- } else {
							- var all_href = ''
							- if(url_key && url_key.indexOf(type.name) > -1) {
							-	var tmp = '/([&])(' + type.name + '=)([^&]*)/gi'
							-	all_href += url_key.replace(eval(tmp), '')
							- }else{
							-	all_href += url_key
							- }
							- if ( typeof(keyword) !== 'string' ) {
							-	var all_first_href = '/store'
							- 	all_href = all_href.substr(0,1) === "&"? '?' + all_href.replace('&','') : all_href
							- } else {
							-	var all_first_href = '?q='+keyword 
							- }
							a( href= all_first_href + all_href ) 全部
						- }
							
						each cid in type.cid
							- if( url_key ){
							- 	if( url_key.indexOf(type.name) > -1 ){
							-		var replaceText = type.name + '=' + cid.id
							-		var tmp = '/(' + type.name + '=)([^&]*)/gi'
							-		var replaceUrl = url_key.replace(eval(tmp), replaceText)
							-		var a_href = replaceUrl
							- 	} else {
							-		var a_href = url_key + '&' + type.name + '=' + cid.id
							- 	}
							- }else{
							-	var a_href = '&' + type.name + '=' + cid.id
							- }
							- if ( typeof(keyword) !== 'string' ) {
							-	var a_url_public = '/store'
							-	a_href = a_href.substr(0,1) === '&'? '?' + a_href.replace('&','') : a_href
							- } else {
							-	var a_url_public = '?q='+keyword
							- 	a_href = a_href.substr(1,1) === '&'? a_href.replace('&','') : a_href
							- }
							- if(url_key.indexOf(cid.id) > -1)
								a.cd.On(href= a_url_public+a_href ) #{cid.attributes.zh_cn}
							- else
								a(href= a_url_public+a_href) #{cid.attributes.zh_cn}